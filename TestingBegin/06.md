# 6. Планета бэкенда

## Содержание

+ [6.1 Планета бэкенда](#61-планета-бэкенда)
+ [6.2 Как работает интернет](#62-как-работает-интернет)
    + [Как работает интернет](#как-работает-интернет)
    + [Клиент-серверная архитектура](#клиент-серверная-архитектура)
+ [6.3 Как работает веб-приложение](#63-как-работает-веб-приложение)
        + [Веб-приложение](#веб-приложение)
        + [HTTP (HyperText Transfer Protocol)](#http-hypertext-transfer-protocol)
        + [API (Application Programming Interface)](#api-application-programming-interface)
+ [6.4 Основы тестирования API](#64-основы-тестирования-api)
    + [Тестирование API](#тестирование-api)
+ [6.5 API на примере DevTools и Postman](#65-api-на-примере-devtools-и-postman)
    + [Вкладка Network](#вкладка-network)
    + [Postman](#postman)
        + [Рабочее пространство](#рабочее-пространство)
        + [Коллекция запросов](#коллекция-запросов)
        + [Первый запрос](#первый-запрос)
+ [6.6 Основы Bash](#66-основы-bash)
        + [Установка Bash](#установка-bash-на-macos)
        + [Синтаксис команд](#синтаксис-команд)
        + [Запуск автотестов](#запуск-автотестов)
        + [Создание резервной копии данных](#создание-резервной-копии-данных)
        + [Анализ логов](#анализ-логов)
        + [Установка зависимостей](#установка-зависимостей)
        + [Создание директорий](#создание-директорий)
        + [Подключение к удаленному серверу](#подключение-к-удаленному-серверу)
+ [6.7 Структура реляционной базы данных](#67-структура-реляционной-базы-данных)
+ [6.8 Знакомство с SQL](#68-знакомство-с-sql)

[Оглавление](/TestingBegin/README.md)

# 6.1 Планета бэкенда

[Планета бэкенда](/TestingBegin/video/6.1.mp4)

<hr>

[Содержание](#содержание)

# 6.2 Как работает интернет

## Как работает интернет

Занимаясь тестированием программного обеспечения, очень важно знать, как работает сам интернет. Звучит наивно? Отчасти, да. Однако как показывает практика, именно твердое знание азов профессии становится базой для будущего успеха. Поэтому расскажем простыми словами о сложных процессах.

Интернет - система связанных между собой устройств, благодаря которой эти устройства могут отправлять друг другу данные. Давайте узнаем,  как выглядит процесс передачи данных.

Сегодня мы рассмотрим, как работает интернет, начиная от передачи данных сетевым устройством, заканчивая получением этих данных пользователем. Чтобы разобраться в этом, нам понадобится модель, но совсем не та, что сияет на обложке глянцевого журнала.

Так, нам поможет модель OSI - Open Systems Interconnection. Как раз модель OSI описывает процесс передачи данных. Данный процесс разделен на семь уровней. Первый уровень - физический,  а последний - прикладной. Начнем по порядку.

![06](/TestingBegin/img/06_01.png)

На первом уровне OSI  данные передаются в виде физических сигналов. Сигналы бывают электрические или оптические. Железу не дано оценить ваш любимый мем, так как для него - это набор нулей и единиц, то есть биты.  Эти симпатичные цифры могут передаваться в виде сигналов, через кабель в компьютер 2000-ых, а могут “лететь” по воздуху, с помощью Wi-Fi метро. 

На следующем уровне - канальном, проверяются и исправляются ошибки передачи первого уровня. Единицы и нули эволюционируют из битов в фреймы. А эти фреймы, как посылки дальним родственникам, получают два адреса - адрес отправителя и адрес получателя. Их называют MAC-адресами. Формат MAC-адреса напоминает имя ребенка Илона Маска - 00:AB:CD:EF:11:22

Важнейший стандарт технологий первого и второго уровней - Ethernet, описывающий кодирование и передачу данных.

Поднимаемся выше! Не успели оглянуться, а мы уже на сетевом уровне. Здесь наши данные не перестают эволюционировать. На этот раз, фреймы становятся пакетами. Также наши данные получают IP-адреса по тому же принципу - адрес отправителя и адрес получателя.

Что ж, тут мы подошли к самому интересному.

Четвертый уровень - транспортный, обеспечивает передачу данных по сети. В этом ему помогают два протокола - TCP и UDP. TCP протокол гарантированно осуществляет доставку запроса и целостность его передачи. Он используется когда пользователь серфит в интернете, пользуется сервисам, соц. сетям и прочим. UDP протокол не имеет такой гарантированной передачи данных, как TCP, но у него есть свое преимущество - это скорость. UDP широко используется для пересылки голосовых и видео в реальном времени. А именно, в IP-телефонии и видео звонках. К примеру, звонки в Telegram используют транспортный протокол UDP.

Сеансовый уровень отвечает за поддержку сеанса или сессии связи. Службы сеансового уровня применяются в средах приложений, требующих удаленного вызова процедур, т.е. чтобы запрашивать выполнение действий на удаленных компьютерах на одном устройстве. За это отвечает протокол PAP. Также примером такой работы является онлайн-трансляция на площадке Twitch. Во время онлайн-трансляции необходимо, чтобы два потока данных (аудио и видео) шли синхронно. 

Вы не устали? Мы уже на шестом, предпоследнем уровне.

Это уровень представления отвечает за кодирование и сжатие данных, для этого используется протокол ASCII. Именно на этом уровне, твой любимый мем обретает человеческий вид, то есть преобразуется в файлы с расширением .jpeg или в подобные. Также шестой уровень отвечает за преобразование видео и аудио в понятные форматы для людей. Помимо перечисленного, уровень представления переводит текст из одной кодировки в другую, и шифрует данные, чтобы их защитить.

Мы на седьмом уровне (это как шестой, но на один повыше). Прикладной уровень - уровень “для людей”. Его главная задача - отобразить пользователю данные в понятном ему виде. Благодаря протоколам прикладного уровня, мы можем серфить по просторам интернета. К основным протоколам передачи данных относятся:

+ `HTTP` - используются для передачи данных в браузере твоих гаджетов;
+ `SMTP` - используются для передачи электронных писем;
+ `FTP` - используются для передачи файлов между компьютерами.

Также, прикладной уровень переводит IP-адрес в знакомый для нас формат - https://kavichki.com/. Это URL-адрес. В этом ему помогает технология DNS.

Расположите уровни модели OSI в правильном порядке, начиная с 1 уровня (сверху вниз).

![06](/TestingBegin/img/06_02.PNG)

Сопоставьте протокол с его сетевым уровнем.

![06](/TestingBegin/img/06_03.PNG)

<hr>

[Содержание](#содержание)

## Клиент-серверная архитектура

Модель OSI служит основой для клиент-серверной архитектуры, которая широко используется в сетевых приложениях.

В клиент-серверной архитектуре логика работы приложения разделяется на две части: клиент и сервер. Клиентская часть выполняет запросы к серверу, требуя определенную информацию. Серверная часть обрабатывает эти запросы и отправляет обратно клиенту ответ.

![06](/TestingBegin/img/06_04.png)

Давайте рассмотрим пример открытия главной страницы "Google". Предположим, что наш компьютер подключен к интернету через роутер. Роутер выделяет компьютеру IP-адрес на основе его MAC-адреса.

Когда мы вводим URL-адрес "https://www.google.com" в браузере, он использует систему DNS, чтобы определить IP-адрес, связанный с доменным именем "google.com". В данном случае, DNS возвращает IP-адрес 173.194.44.40, соответствующий веб-странице Google.

Затем браузер формирует запрос на этот IP-адрес, указывая нужный путь и другую информацию. Компьютер упаковывает данные в пакет и отправляет его своему роутеру.

Роутер перенаправляет пакет через цепочку сетевых устройств и провайдеров до сервера компании Google, который отвечает за обработку запросов к главной странице. Веб-сервер компании Google обращается к базе данных, получает необходимые данные и формирует ответ.

Затем пакет с данными главной страницы отправляется обратно на наш компьютер, пройдя тот же путь. Наш браузер получает этот ответ и отображает главную страницу Google на основе полученных данных. На все ушло меньше одной секунды - магия!

В результате клиентом является наш компьютер, который запрашивает нужную пользовательскую информацию, а сервером является система компании Google, которая обрабатывает запросы и отправляет обратно результаты. Клиент-серверная архитектура позволяет эффективно организовать обмен данными и работу приложений в сети.

В заключение, модель OSI предоставляет нам понятную структуру для понимания процесса передачи данных в интернете. От физических сигналов до протоколов прикладного уровня, каждый уровень играет свою роль в обеспечении связи между устройствами. Благодаря этой системе, мы можем наслаждаться серфингом в сети, обмениваться электронными письмами, передавать файлы и использовать множество других онлайн-сервисов. Интернет стал неотъемлемой частью нашей жизни, и понимание процесса передачи данных помогает нам лучше разбираться в его работе и функциональности.

<hr>

[Содержание](#содержание)

# 6.3 Как работает веб-приложение

## Веб-приложение

Дорогие друзья, пришло время узнать, как работает веб приложение, однако для начала дадим ему емкое определение. 

**Веб-приложение** - это программное обеспечение, которое доступно и функционирует через веб-браузер на компьютере или мобильном устройстве. Оно размещено на веб-сервере и предоставляет пользователю интерфейс для взаимодействия с различными функциями и сервисами, которые выполняются на сервере.

В отличие от компьютерных программ, которые запускаются локально в операционной системе устройства, веб-приложения используют мощности другого оборудования. Например, Excel компьютерная программа, а Google Sheets - веб-приложение.

Веб-приложение основано на клиент-серверной архитектуре. Значит, принцип работы веб-приложения - запрос и ответ.  Как на клиенте, так и на сервере находятся программы. Программы на клиенте называют фронтендом, а программы на сервере - бэкендом. Также на стороне сервера находится база данных.

Проще говоря, **фронтенд** - это все, что видит юзер, открывая страницу веб-приложения, и с чем он взаимодействует.В своей работе фронтенд-разработчики используют:

+ `HTML` - “скелет” страницы: структура, данные для браузера;
+ `CSS` - “стиль” страницы: цвета, шрифты и ее внутреннее наполнение;
+ `JavaScript` - логика страницы: слайдеры, калькуляторы, анимации;
+ `Фреймворк` - инструмент, упрощающий разработку. Например, React.
 

**Бэкенд** - это фактически то, что скрыто от глаз пользователя и происходит вне его браузера. В это же время база данных хранит данные каждого конкретного пользователя. Бэкенд-разработчики используют:

+ Язык программирования в зависимости от задачи: от C++ до Ruby;
+ SQL - язык запросов в базы данных, и саму систему управления базами данных;
+ Как и фронтенд-разработчики - фреймворки.
 

Представьте, что мы заходим в Uber, чтобы заказать такси. Взаимодействие фронтенда и бэкенда будет выглядеть следующим образом:

+ мы совершаем заказ, заполняя все поля и нажимая кнопку “Заказать”;
+ фронтенд оформляет нашу пользовательскую информацию;
+ браузер отправляет информацию на сервер;
+ бэкенд обрабатывает полученную информацию заказа; 
+ бэкенд обращается в базу данных, за нужной ему информацией;
+ бэкенд оформляет обработанную информацию в ответ;
+ сервер отправляет ответ в браузер;
+ фронтенд обрабатывает информацию;
+ мы получаем информацию вида “Водитель найден. Будет через 5 минут”.

![06](/TestingBegin/img/06_05.png)

Все знают, что пользователи общаются с приложениями через экран своего гаджета, т.е. через интерфейс. А как общаются фронтенд и бэкенд? Чтобы сделать запрос к бэкенду, фронтенд обращается к API бэкенда - программному интерфейсу, используя протокол HTTP.

![06](/TestingBegin/img/06_06.PNG)

<hr>

[Содержание](#содержание)

## HTTP (HyperText Transfer Protocol)

**HTTP** - это протокол передачи данных, используемый для коммуникации между клиентом и сервером в сети интернет. В контексте API, HTTP обычно используется для обмена данными между клиентским приложением (например, веб-браузером или мобильным приложением) и сервером API.

HTTP состоит из стартовой строки, заголовков, пустой строки и тела сообщения.

![06](/TestingBegin/img/06_07.png)

В стартовую строку запроса указывают URL-адрес и метод протокола.

![06](/TestingBegin/img/06_08.png)

URL-адрес состоит из различных частей:

+ протокол - наш друг HTTP или его расширение HTTP(S)

![06](/TestingBegin/img/06_09.png)

+ доменное имя - тот самый, человеческий, адрес

![06](/TestingBegin/img/06_10.png)

+ порт - отображает технический параметр, используемый для доступа к ресурсам на сервере. Обычно подразумевается, что веб-сервер использует стандартные порты 80 и 443

![06](/TestingBegin/img/06_11.png)

+ параметры - это дополнительные данные, которые браузер отправляет серверу. Параметры имеют формат “ключ=значение” и разделяются между собой знаком &. Каждый сервер имеет свои правила обработки этих параметров.

![06](/TestingBegin/img/06_12.png)

+ якорь - это тоже адрес, но в рамках параметра. Например, ссылка на заголовок

![06](/TestingBegin/img/06_13.png)

К основным методам запроса относятся:

+ `GET` - получение. Например, при открытии страницы Вконтакте;
+ `POST` - создание. Например, при создании нового аккаунта;
+ `PUT` - обновление. Например, при редактировании профиля;
+ `DELETE` - удаление. Например, при удалении аккаунта.

Есть пять типов статусов ответов:

+ `1ХХ` - дают информацию о процессе передачи. Например, мы отправляем связанные между собой запросы. Данный код сообщает, что сервер вошел в режим хатико;
+ `2ХХ` - дают информацию об успешной передаче. Появляется, когда все работает корректно;
+ `3ХХ` - дают информацию о перенаправлении запроса. Также называют редиректом. Используются, чтобы перенаправить пользователя с одной страницы на другую;
+ `4ХХ` - дают информацию об ошибке на стороне клиента. Например, если зайти на несуществующую страницу;
+ `5ХХ` - дают информацию об ошибке, на стороне сервера. Например, если сервер приложения отключили от питания.

В заголовок HTTP-протокола указывают служебную информацию запроса. Например, информация о нашем браузере и о пользователе.

Между заголовками и телом ставятся пустая строка, чтобы браузер смог отличать блоки. А в тело запроса указываем данные переданные серверу, а в тело ответа данные, которые отправляет нам сервер.

<hr>

[Содержание](#содержание)

## API (Application Programming Interface)

`API` - это интерфейс, с помощью которого одна программа общается и обменивается данными с другой. Также, это набор инструкций и определений, которые определяют способ взаимодействия и коммуникации между различными программными компонентами.

Хорошей практикой является документирование API, которое предоставляет команде разработки информацию о доступных методах, параметрах, форматах данных и других деталях, необходимых для успешного использования API.

Данные запроса и ответа API передается в определенном формате, через протокол HTTP в теле сообщения.

Каждый формат работает по одному принципу “ключ-значение”, где поле “ключ”- это имя параметра, а поле “значение” хранит определенные данные. Пример пользовательских данных:

![06](/TestingBegin/img/06_14.png)

Существует два популярных формата - JSON и XML. Давай посмотрим на структуру каждого из них.

Это пример JSON-объекта, который содержит информацию о пользователе:

```json
{
  "user":{
    "id": 1,
    "firstName": "Иван",
    "secondName": "Иванов",
    "middleName": null,
    "phone": ["89999999999", "2333333"],
    "mail": "example@mail.ru"
  }
}
```

Давайте рассмотрим каждую строку кода:

+ `"user": { ... }` - Здесь у нас есть вложенный объект с именем "user", который содержит информацию о пользователе. Объект "user" является словарем, где ключи представляют поля пользователя.
+ `"id": 1` - Это поле содержит числовое значение, указывающее идентификатор пользователя. В данном случае значение равно 1.
+ `"firstName": "Иван"` - Это поле содержит строковое значение, представляющее имя пользователя. В данном случае имя пользователя - "Иван".
+ `"secondName": "Иванов"` - Это поле также содержит строковое значение, указывающее фамилию пользователя. Здесь фамилия пользователя - "Иванов".
+ `"middleName": null` - В этом поле содержится пустое значение или значение null, что может означать отсутствие отчества у пользователя.
+ `"phone": ["89999999999", "23333333"]` - Это поле представляет собой массив значений, содержащий номера телефонов пользователя. В данном случае массив содержит два значения: "89999999999" и "23333333".
+ `"mail": "example@mail.ru"` - В этом поле содержится строковое значение, указывающее адрес электронной почты пользователя. Здесь адрес электронной почты - "example@mail.ru".

В XML это выглядит следующим образом:

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<root>
  <user>
    <id>1</id>
    <firstName>Иван</firstName>
    <secondName>Иванов</secondName>
    <middleName/>
    <phone>89999999999</phone>
    <phone>2333333</phone>
    <mail>example@mail.ru</mail>
  </user>
</root>
```

Рассмотрим каждую строку кода:

+ `<?xml version="1.0" encoding="UTF-8" ?>` - Эта строка указывает на версию XML и кодировку документа. В данном случае используется версия 1.0 и кодировка UTF-8.
+ `<root>` - Этот тег представляет корневой элемент XML-документа, внутри которого содержится вся информация о пользователе.
+ `<user>` - Этот тег представляет собой элемент, содержащий информацию о конкретном пользователе. Весь набор полей пользователя будет содержаться внутри этого элемента.
+ `<id>1</id>` - Этот тег содержит числовое значение, указывающее идентификатор пользователя. В данном случае значение равно 1.
+ `<firstName>Иван</firstName>` - Этот тег содержит строковое значение, представляющее имя пользователя. В данном случае имя пользователя - "Иван".
+ `<secondName>Иванов</secondName>` - Этот тег также содержит строковое значение, указывающее фамилию пользователя. Здесь фамилия пользователя - "Иванов".
+ `<middleName/>` - Этот тег представляет собой пустой элемент без содержимого, что может означать отсутствие отчества у пользователя.
+ `<phone>89999999999</phone> и <phone>2333333</phone>`  - Этот тег содержит строковое значение, указывающее номер телефона пользователя. XML не поддерживает массив значений, поэтому тег дублируется. В данном случае номер телефона - "89999999999" и "2333333".
+ `<mail>example@mail.ru</mail>` - В этом теге содержится строковое значение, указывающее адрес электронной почты пользователя. Здесь адрес электронной почты - "example@mail.ru".
+ `</user>` - Этот тег закрывает элемент "user", содержащий информацию о пользователе.
+ `</root>` - Этот тег закрывает корневой элемент XML-документа.

Выбор между JSON и XML зависит от конкретных требований и предпочтений разработчика или системы. JSON обычно более компактный и легкий для чтения и записи программами, в то время как XML предоставляет больше гибкости и возможностей для описания структурированных данных.

API широко используется в различных сферах, включая веб-разработку, мобильные приложения, облачные сервисы и многое другое. Он позволяет разным приложениям интегрироваться и взаимодействовать друг с другом, обеспечивая гибкость, модульность и расширяемость в разработке программного обеспечения.

Переведите указанный текст из формата JSON в формат XML, используя [конвертер](https://www.convertjson.com/json-to-xml.htm):

```json
{
    "id": 123,
    "data":{
        "full_name": "Иванов Иван Иванович",
        "birth_day": "12.12.2000"
    }
}
```

Полученные данные скопируйте в ответ 

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<root>
  <id>123</id>
  <data>
    <full_name>Иванов Иван Иванович</full_name>
    <birth_day>12.12.2000</birth_day>
  </data>
</root>
```

<hr>

[Содержание](#содержание)

# 6.4 Основы тестирования API

## Тестирование API

**Валидация** - это процесс проверки данных, введенных пользователем, на соответствие заданным критериям (например, на отсутствие ошибок в данных).

**Данные** - это введенная пользователем информация, которая будет провалидирована (ФИО, адрес, город, номер телефона, ИНН и др.).

Теперь можно поговорить и об тестировании API.

Как мы знаем, API —  это интерфейс, с помощью которого одна программа общается и обменивается данными с другой. Основная цель API-тестирования —  проверить функциональность, надежность и безопасность интерфейсов программирования. Тестирование API проводится на уровне интеграционного тестирования.

![06](/TestingBegin/img/06_15.png)

Тестирование API включает проверку функциональности, надежности и производительности программного интерфейса, который позволяет взаимодействовать с внешними системами или сервисами.

Вот некоторые основные аспекты, на которые следует обратить внимание при тестировании API:

+ Проверка функциональности: Убедитесь, что API выполняет ожидаемые операции и возвращает правильные результаты. Проверьте, что запросы и ответы соответствуют спецификации API, включая формат данных, параметры запросов и структуру ответов.
+ Проверка обработки ошибок: Проверьте, что API корректно обрабатывает ошибки. Проверьте, что правильные коды состояния HTTP возвращаются при ошибках, и что сообщения об ошибках содержат достаточно информации для диагностики проблемы.
+ Аутентификация и авторизация: Проверьте, что механизмы аутентификации и авторизации в API работают правильно. Убедитесь, что доступ к различным функциям API ограничен только соответствующим пользователям или клиентам.
+ Тестирование различных типов запросов: Протестируйте различные типы запросов, такие как GET, POST, PUT, DELETE и другие, чтобы убедиться, что они работают правильно и возвращают ожидаемые результаты.
+ Валидация данных: Проверьте, как API обрабатывает различные типы входных данных, такие как текстовые строки, числа, даты и файлы. Убедитесь, что API валидирует и обрабатывает входные данные правильно.
+ Тестирование сценариев использования: Протестируйте API с использованием различных сценариев использования, чтобы убедиться, что он работает правильно в различных контекстах и с различными комбинациями запросов.
+ Тестирование производительности: Проверьте, как API обрабатывает большое количество запросов и как быстро он возвращает ответы. Используйте инструменты для нагрузочного тестирования, чтобы оценить производительность и масштабируемость API.
+ Тестирование безопасности: Проверьте, что API обеспечивает необходимую защиту от уязвимостей, таких как атаки на подделку запросов между сайтами (CSRF) и вредоносный код (XSS-атаки, SQL-инъекции и т. д.)

Важно заметить, что тестирование API требует понимания его функциональности, спецификаций и возможных сценариев использования.

<hr>

[Содержание](#содержание)

**Эндпоинт** представляет собой конечную точку (URL) веб-приложения или веб-сервиса, к которой можно отправлять HTTP-запросы для выполнения определенной функциональности или получения данных. Эндпоинт определяет, какие операции могут быть выполнены с использованием данного URL и какие данные можно передавать или получать.

## Пример 4

Предположим, наша задача - протестировать позитивный сценарий создания пользователя в интернет-магазине по покупке домашних животных. Для этого воспользуемся открытой API документацией - https://petstore.swagger.io/.

[Видео](https://youtu.be/997-YpNbE3I)

### Пошаговая инструкция

![06](/TestingBegin/img/06_16.png)

**Swagger UI** - это инструмент для визуализации и интерактивного исследования API с использованием спецификации OpenAPI (ранее известной как Swagger).

С помощью Swagger UI можно легко ознакомиться с документацией API и выполнить тестовые запросы, не выходя из браузера. Он автоматически генерирует интерфейс на основе спецификации OpenAPI, что упрощает взаимодействие с API и ускоряет процесс разработки и тестирования.

А теперь составим тест:

**Название теста:** Создание нового пользователя

**Шаги:**

+ Создать нового пользователя, отправив запрос на эндпоинт https://petstore.swagger.io/#/user/createUser с данными нового пользователя:

```json
{
  "id": 3000,
  "username": "elon3000",
  "firstName": "elon",
  "lastName": "musk",
  "email": "elon.musk@spacex.com",
  "password": "mars",
  "phone": "89993336699",
  "userStatus": 1
}
```

![06](/TestingBegin/img/06_17.png)

+ Войти в систему за аккаунт пользователя, отправив запрос на эндпоинт https://petstore.swagger.io/#/user/loginUser с данными нового пользователя: https://petstore.swagger.io/v2/user/login?username=elon3000&password=mars

**Ожидаемый результат:**

+ Код 200, что указывает на успешное создание пользователя.
+ В ответе есть необходимые поля (например, идентификатор пользователя, имя, электронная почта).

![06](/TestingBegin/img/06_18.png)

+ Созданный пользователь отображается в базе данных.
+ Созданный пользователь может успешно войти в систему, используя предоставленные данные (имя пользователя и пароль).

![06](/TestingBegin/img/06_19.png)

![06](/TestingBegin/img/06_20.png)

Это пример простого теста для одного эндпоинта API. В реальных сценариях тестирования API обычно требуется создание разных тестовых случаев для проверки различных функций и сценариев использования API, а также обработки ошибок, аутентификации и других аспектов, упомянутых в уроке.

<hr>

[Содержание](#содержание)

## Практическое задание 4:

Предлагаем попрактиковаться в тестировании API, используя открытый сервис https://petstore.swagger.io/.

Создайте карточку питомца с помощью метода https://petstore.swagger.io/#/pet/addPet. 

Полученное тело ответа приложите в комментарии.

Пример решения:
Запрос и Ответ(структура одинаковая): 

```json
{
  "id": 1,
  "category": {
    "id": 1,
    "name": "Шарик"
  },
  "name": "doggie",
  "photoUrls": [
    "https://avatars.mds.yandex.net/i?id=aed23c7e563ec67524014c5605424df6_l-5443655-images-thumbs&n=13"
  ],
  "tags": [
    {
      "id": 1,
      "name": "Дворняжки"
    }
  ],
  "status": "available"
}
```

<hr>

[Содержание](#содержание)

# 6.5 API на примере DevTools и Postman

Чтобы отслеживать передачу данных между API фронтенда и бэкенда можно использовать DevTools.

**DevTools** — это набор средств веб-разработки, которые отображаются рядом с отображаемой веб-страницей в браузере. DevTools предоставляет эффективный способ проверки и отладки веб-страниц и веб-приложений.

## Вкладка Network

В Devtools каждого браузера есть замечательная вкладка - Network. Благодаря ей можно узнать, сколько времени заняла загрузка страницы, какие данные подключились или не подключились к странице, и так далее. Для открытия нажать F12. При первом открытии вкладка будет пустой, поэтому необходимо перезагрузить страницу.

После перезагрузки появится таблица с записями взаимодействия клиента и сервера. Чтобы включить/выключить мониторинг трафика, необходимо нажать/отжать кнопку Recorder:

![06](/TestingBegin/img/06_21.png)

Здесь можно узнать тип запроса, статус ответа, размер данных и многое другое. В левом нижнем углу отображается информация о количестве запросов, трафике и времени загрузки.

![06](/TestingBegin/img/06_22.png)

Можно отфильтровать записи по имени запроса и формату данных  — например, картинки или код.

![06](/TestingBegin/img/06_23.png)

Обычно вкладку Network используют, чтобы узнать причину отсутствия данных, которые должны быть. Если есть ошибка, то запись будет красного цвета.

![06](/TestingBegin/img/06_24.png)

Также сообщение об ошибке отобразится и на вкладке Console.

![06](/TestingBegin/img/06_25.png)

Чтобы узнать подробную информацию запроса, необходимо нажать на него:

![06](/TestingBegin/img/06_26.png)

В зависимости от запроса можно узнать следующую информацию:

+ `Headers` - заголовки ответа и запроса;
+ `Payload` - полезная нагрузка запроса;
+ `Preview` - сводка по телу ответа запроса.
+ `Response` - тело ответа запроса в "чистом" виде;
+ `Initiator` - инициатор запроса;
+ `Timing` - время запроса и ответа;
+ `Cookies` - личная информация пользователя.

Напоследок, можно выбрать скорость соединения и проверить, как сайт работает при 3G.

![06](/TestingBegin/img/06_27.png)

Как отследить передачу данных понятно, а как самостоятельно отправить запрос с нужными данными, минуя браузер? Для этого дела придумали классный инструмент - Postman.

**P.S.**

Во время работы, у вас возникнут вопросы по работе с DevTools. Можно воспользоваться лучшим инструментом - Google или документацией инструмента - https://developer.chrome.com/docs/devtools/.

<hr>

[Содержание](#содержание)

## Postman

**Postman** – это приложение для работы с API. Он является популярным API клиентом, позволяющий разрабатывать, тестировать и документировать API. С помощью Postman мы можем отправлять запросы к серверу и получать от него ответ.

Если опыта работы с API клиентами нет, то рекомендуем пользоваться базовыми возможностями, которые мы и рассмотрим.

Последняя версия Postman доступна для загрузки по ссылке: https://www.postman.com/downloads/.

### Рабочее пространство

Домашняя страница отображает информацию о работе пользователя. Для выполнения запросов необходимо рабочее пространство. По умолчанию, в Postman есть рабочее пространство "My Workspace". Давайте создадим новое рабочее окружение. Для этого необходимо нажать на кнопку “Create Workspace” в выпадающем списке “Workspace”.

![06](/TestingBegin/img/06_28.png)

Далее выбираем нужный шаблон и даём произвольное название. После чего, выбираем нужный уровень доступа и нажимаем “Create Workspace and Team”.

![06](/TestingBegin/img/06_29.png)

<hr>

[Содержание](#содержание)

### Коллекция запросов

Начнем с создания коллекции. В коллекцию можно поместить несколько запросов, которые будут запускаться поочередно. Таким образом, можно создавать коллекцию для каждого тест-кейса и просто их запускать, что сэкономит уйму времени. Также, коллекцию можно отправить своему другу, чтобы он оценил ваши навыки.

Для этого нажмем кнопку “Create Collection”.

![06](/TestingBegin/img/06_30.png)

Коллекции, как и рабочему пространству, можно задать произвольное имя.

![06](/TestingBegin/img/06_31.png)

<hr>

[Содержание](#содержание)

### Первый запрос

Мы будем тренироваться, благодаря юмору Чака Норриса! Для этого перейдем на сайт —  https://api.chucknorris.io/. Методы этого сервиса отправляют отборные шутки Чака.

![06](/TestingBegin/img/06_32.png)

Настал час первого запроса к серверу. Сначала нажмем кнопку “Add request”.

![06](/TestingBegin/img/06_33.png)

Запросам можно задать произвольное имя.

![06](/TestingBegin/img/06_34.png)

В выпадающем списке “METHOD” необходимо выбрать метод нужного нам сервиса. Мы воспользуемся сервисом для получения рандомной шутки Чака Норриса - https://api.chucknorris.io/jokes/random, поэтому выбираем “GET”.

![06](/TestingBegin/img/06_35.png)

В следующее поле необходимо указать сам URL-адрес нужного сервиса.

![06](/TestingBegin/img/06_36.png)

Готово! Осталось проверить запрос на корректность составления. Нажимаем на «Send».

![06](/TestingBegin/img/06_37.png)

Победа! Код 200, шутки за 300. Именно это мы и хотели получить :)

![06](/TestingBegin/img/06_38.png)

Напоследок, сохраним запрос в нашу коллекцию, иначе придется настраивать запрос заново.

![06](/TestingBegin/img/06_39.png)


**P.S.**

На этом наше знакомство с Postman завершено. Postman позволяет указывать параметры, заголовки и тело запроса. Также, в самом Postman можно писать авто-тесты. В данном уроке мы сделали лишь краткий обзор. Чтобы освоить Postman в полной мере, советуем ознакомиться с документацией - https://learning.postman.com/docs/introduction/overview/ .

Найдите метод https://api.chucknorris.io/ для получения категорий шуток. Укажите на какие темы умеет шутить Чак :)

![06](/TestingBegin/img/06_40.png)

+ [x] travel
+ [ ] Jason Statham
+ [x] dev
+ [x] career
+ [ ] football

Переходим по ссылке https://api.chucknorris.io/jokes/categories

Получаем ответ :

```python
["animal","career","celebrity","dev","explicit","fashion","food","history","money","movie","music","political","religion","science","sport","travel"]
```

<hr>

[Содержание](#содержание)

# 6.6 Основы Bash

Командная строка **Bash** (от англ. Bourne again shell, каламбур «Born again» shell — «возрождённый» shell) - усовершенствованная и модернизированная вариация командной оболочки shell. Одна из наиболее популярных современных разновидностей командной оболочки UNIX. Особенно популярна в среде Linux и MacOS, где она часто используется в качестве предустановленной командной оболочки. Это мощный инструмент, который позволяет взаимодействовать с компьютером или сервером, используя текстовые команды.

![06](/TestingBegin/img/06_41.png)

Установка Bash на различных операционных системах может немного отличаться. Вот инструкции по установке Bash на macOS, Linux и Windows:

### Установка Bash на macOS:

На macOS, Bash обычно предустановлен, поэтому вам, скорее всего, не потребуется устанавливать его заново. Вы можете проверить, какая версия Bash установлена, выполнив следующую команду в терминале:

```bash
bash --version
```

Если вы хотите обновить Bash или установить другую оболочку, такую как Bash 5, вы можете использовать Homebrew:

1. Установите Homebrew, если его у вас нет. Откройте терминал и выполните следующую команду:

```bash
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```

2. Затем выполните команду для установки Bash:

```bash
brew install bash
```

### Установка Bash на Linux (Ubuntu и Debian):

В большинстве дистрибутивов Linux, таких как Ubuntu и Debian, Bash также обычно предустановлен. Вы можете проверить его версию, выполнив:

```bash
bash --version
```

Если вы хотите обновить Bash или установить его на другой дистрибутив Linux, выполните следующие команды:

1. Обновите список пакетов:

```bash
sudo apt-get update
```

2. Установите Bash:

```bash
sudo apt-get install bash
```

### Установка Bash на Windows:

На Windows Bash можно установить с помощью Windows Subsystem for Linux (WSL). Вот как это сделать:

1. Откройте "Параметры" (Settings) в Windows.
2. Перейдите в раздел "Приложения" (Apps).
3. В левой панели выберите "Дополнительные параметры приложений и функций" (Optional Features).
4. Прокрутите вниз и найдите "Подсистема Windows для Linux" (Windows Subsystem for Linux) и установите ее.
5. После завершения установки перезагрузите компьютер.
6. Зайдите в Microsoft Store и установите любой дистрибутив Linux, такой, как Ubuntu или Debian.
7. Запустите установленный дистрибутив Linux и выполните первоначальную настройку.

Теперь у вас есть доступ к Bash в Windows через WSL.

После установки Bash на вашей операционной системе вы можете начать использовать его для выполнения команд и скриптов. Эта оболочка предоставляет множество мощных инструментов для управления вашей системой и выполнения различных задач.

<hr>

[Содержание](#содержание)

## Синтаксис команд

Bash предоставляет богатый набор команд, которые могут быть полезными. Важно понимать базовый синтаксис команд, чтобы эффективно использовать их в работе. Вот несколько ключевых моментов, которые стоит учитывать:

### Команды и аргументы

Каждая команда в Bash имеет свой собственный синтаксис и список аргументов. Общий формат команды выглядит так:

```bash
пользователь@компьютер:директория$ команда [опции] [аргументы]
```

+ **Команда** - это имя команды, которую вы хотите выполнить, например, "cp" или "mkdir".
+ **Опции (флаги)** - это дополнительные параметры, которые изменяют поведение команды. Опции обычно начинаются с символа "-", например, "-r" или "--verbose".
+ **Аргументы** - это данные, над которыми команда будет выполняться. Например, это может быть путь к файлу или директории.

Примеры:

```bash
cp -r /путь/к/исходной_папке /путь/к/целевой_папке
```

```bash
mkdir новая_директория
```

### Пути к файлам и директориям

При работе с файлами и директориями в Bash используются пути. Путь - это адрес файла или директории в файловой системе. Вот некоторые примеры путей:

+ **Абсолютный путь:** "/путь/к/файлу" (начинается с корневой директории).
+ **Относительный путь:** "папка/файл" (относительно текущей директории).

Путь к файлу или директории может быть аргументом для многих команд, таких как "cp", "mv", "rm" и другие.

### Вывод команды

По умолчанию, большинство команд в Bash выводят результат своей работы (stdout) прямо на экран. Это полезно, чтобы видеть информацию о выполнении команды. Например, если вы выполните команду "ls", она выведет список файлов и директорий в текущей директории:

```bash
$ ls
file1.txt  file2.txt  directory1  directory2
```

### Перенаправление вывода

Иногда может потребоваться перенаправить вывод команды в файл, чтобы сохранить его для дальнейшего анализа или автоматизации. Для этого используются операторы перенаправления:

+ ">": Перезаписывает содержимое файла. Например:

```bash
$ ls > список_файлов.txt
```

Эта команда перезапишет файл "список_файлов.txt" списком файлов текущей директории.

+ ">>": Добавляет вывод команды в конец файла, не перезаписывая его. Например:

```bash
$ ls >> список_файлов.txt
```

Эта команда добавит список файлов текущей директории в конец файла "список_файлов.txt".

### Пайплайны

Пайплайн ("|") позволяет объединять вывод одной команды как ввод для другой. Это мощный инструмент для фильтрации, сортировки и анализа данных. Например, вы можете использовать команду "grep" для поиска определенных строк в выводе другой команды:

```bash
$ команда1 | grep "ключевое_слово"
```

###  Работа с правами доступа

В ручном тестировании может возникнуть необходимость изменять права доступа к файлам и директориям. Для этого используется команда "chmod". Например, чтобы разрешить выполнение файла, вы можете использовать следующий синтаксис:

```bash
chmod +x файл
```

Теперь рассмотрим несколько сценариев использования Bash в контексте ручного тестирования.

<hr>

[Содержание](#содержание)

### Запуск автотестов

Если на вашем проекте есть автоматизация тестирования, вы можете запускать сценарий с командами для запуска тестов. Просто выполните следующую команду:
```bash
bash run_tests.sh
```

Здесь `run_tests.sh` - это имя вашего сценария для запуска тестов. Это удобно, когда вам нужно повторно выполнять тесты без лишних усилий.

### Создание резервной копии данных

Перед выполнением каких-либо важных действий или изменений важных файлов,  вам может понадобиться создание резервной копии данных. Используйте команду `cp` для копирования файлов или папок:

```bash
cp -r /путь/к/важной_папке /путь/к/резервной_копии
```

Это создаст резервную копию важных файлов или папок, чтобы вы могли восстановить данные в случае необходимости.

### Анализ логов

При тестировании вы можете столкнуться с лог-файлами, которые содержат информацию о работе вашего приложения. Для поиска ошибок или предупреждений в логах используйте команду `grep`:

```bash
cat log.txt | grep "ошибка"
```

Эта команда выведет строки из файла `log.txt`, содержащие ключевое слово "ошибка".

### Установка зависимостей

Если вам нужны дополнительные программы или библиотеки для вашего проекта, Bash может помочь вам установить их. Используйте `apt-get install`, например:

```bash
sudo apt-get install название_пакета
```

Эта команда установит выбранный пакет, обеспечивая необходимые зависимости для вашего тестирования.

### Создание директорий

При тестировании может потребоваться создать новую директорию для хранения результатов. Вы можете сделать это с помощью команды `mkdir`:

```bash
mkdir результаты_тестирования
```
Теперь у вас есть место для хранения результатов вашего тестирования.

### Подключение к удаленному серверу

Иногда вам нужно подключиться к удаленному серверу для выполнения тестов на удаленной машине или для других задач. Bash предоставляет команду `ssh` для безопасного удаленного доступа:

```bash
ssh пользователь@удаленный_сервер
```

Это позволяет установить соединение с удаленным сервером и выполнять команды на нем.

**Командная строка Bash** - универсальный инструмент для автоматизации и управления различными задачами. Однако помните о предосторожности, особенно при использовании команд с правами администратора. Знание и умение работать с Bash могут существенно упростить вашу работу и повысить эффективность ручного тестирования.

<hr>

[Содержание](#содержание)

# 6.7 Структура реляционной базы данных

Когда мы будем тестировать веб-приложение — например интернет-магазин, блог или игры с вероятностью в 100% наверняка мы столкнемся с базой данных. В базах данных хранят различную информацию, в зависимости от типа приложения. 

Например:

+ Если это компьютерная игра, то в базе данных будут типы и локации врагов, их уровень урона и здоровья, и так далее;
+ Если это маркетплейс, то в его базе данных будет храниться имя клиента, его заказы, номер телефона, бонусы.

Тестировщику необходимо понимать устройство БД, чтобы проверять корректность записи данных.

**База данных** — это набор данных, организованных определенным способом. Для работы с БД необходимы определенные инструменты:

+ SQL - язык структурированных запросов, созданный для того, чтобы получать необходимую информацию.
+ Система управления базами данных - ПО, позволяющий работать с БД. По сути, это аналог веб-браузера.

![06](/TestingBegin/img/06_42.png)

Существуют различные модели баз данных, но мы рассмотрим только реляционные. Реляционные БД представлены в виде таблиц, где данные связаны между собой. 

Теперь давайте рассмотрим основные понятия реляционной модели:

1. **Отношение** — это двумерная таблица, состоящая из столбцов и строк.

![06](/TestingBegin/img/06_43.png)

2. **Атрибут** — столбец в таблице, который содержит определенный параметр. Например: название, тип, дата, стоимость и так далее.

![06](/TestingBegin/img/06_44.png)

3. **Домен** — это допустимые значения для каждого атрибута. Например, в столбце “Логин” значения должны представлять собой набор буквенных символов, но они обязательно должны содержать символ “@”.

![06](/TestingBegin/img/06_45.png)

4. **Значение** — это элемент таблицы, находящийся на пересечении столбцов и строк.

![06](/TestingBegin/img/06_46.png)

5. **Кортеж** — это табличная строка с порядковым номером, содержащая информацию об одном конкретном объекте.

![06](/TestingBegin/img/06_47.png)

6. **Ключ** — это самый важный столбец в таблице, так как он связывает таблицы между собой.

![06](/TestingBegin/img/06_48.png)

Ключи бывают нескольких видов: 

+ `Первичный ключ` — идентификатор объекта;
+ `Потенциальный ключ` — другое уникальное значение, которое может служить идентификатором; 
+ `Внешний ключ` — столбец-ссылка, использующийся для связи между таблицами; 

Внешний ключ обязательно соответствует первичному ключу в другой таблице.

Например, пользователь хочет получить песни своего аккаунта:

![06](/TestingBegin/img/06_49.png)

Это пример связи `one-to-many` (один-ко-многим) - один пользователь и много песен. Также, есть и другие типы связей:

+ `one-to-one` (один-к-одному). Например, для хранения паспортных данных в отдельной таблице - один человек и один паспорт;
+ `many-to-many` (много-ко-многим). Например, для записей бронирования клиента в отеле - каждую комнату может снять каждый клиент. 

<hr>

[Содержание](#содержание)

# 6.8 Знакомство с SQL

## SQL

**SQL (Structured Query Language)** является языком программирования, который используется для управления данными в реляционных базах данных. SQL имеет простой и понятный синтаксис, основанный на командах и выражениях. 

Основные операции, поддерживаемые SQL, включают:

1. Создание таблиц: SQL позволяет определить структуру таблицы, включая названия столбцов, типы данных и ограничения.
2. Вставка данных: SQL позволяет добавлять новые строки данных в таблицы.
3. Извлечение данных: SQL предоставляет возможность формировать запросы для выборки данных из таблиц. Это позволяет фильтровать, сортировать и группировать данные, а также объединять данные из нескольких таблиц.
4. Обновление данных: SQL позволяет изменять существующие данные в таблицах.
5. Удаление данных: SQL позволяет удалять строки данных из таблиц.

SQL является стандартным языком для работы с реляционными базами данных и широко используется в различных системах управления базами данных (СУБД). Рассмотрим одну из самых популярных - MySQL.

Установка MySQL на различных операционных системах может немного отличаться. Вот инструкции по установке MySQL на macOS, Linux и Windows:

### Установка MySQL

Последняя версия MySQL доступна для загрузки по ссылке: https://dev. mysql. com/downloads/mysql/.Перейдите на страницу загрузки MySQL Community Server.

1. Выберите версию MySQL, подходящую для вашей системы (обычно это будет "Windows (x86, 64-bit), MSI Installer").
2. Скачайте установщик MySQL.
3. Запустите установщик и следуйте инструкциям по установке. Во время установки вам будет предложено задать пароль для пользователя "root" MySQL.
4. Откройте командную строку в Windows.
5. Перейдите в каталог с установленной MySQL:

```bash
cd /d <каталог установки>/bin
```

6. Выполните:

```bash
mysql -uroot -p
```

7. Введите пароль, заданный при установке.
8. В MySQL с настройками по умолчанию (версия 8.0.32.0) используется язык JS, а не SQL. Необходимо переключить командой:  \sql. В противном случае, при попытке создать базу данных командная строка будет ругаться на ошибку синтаксиса.

В командной строке запустится клиент для работы с MySQL. С этого момента можно вводить любые SQL запросы с точкой с запятой ; на конце.

### Установка MySQL на macOS:

Для macOS можно использовать Homebrew для установки MySQL. Вот как это сделать:

1. Откройте терминал.
2. Установите Homebrew, если его у вас нет, следуя инструкциям на [официальном сайте Homebrew](https://brew.sh/).
3. После установки Homebrew выполните следующую команду для установки MySQL:

```bash
brew install mysql
```

4. После завершения установки можно запустить MySQL:

```bash
brew services start mysql
```

5. Теперь MySQL работает на вашем Mac.

### Установка MySQL на Linux (Ubuntu и Debian):

Для большинства дистрибутивов Linux, таких, как Ubuntu и Debian, можно использовать APT для установки MySQL:

1. Откройте терминал.
2. Обновите список пакетов:

```bash
sudo apt-get update
```

3. Установите MySQL:

```bash
sudo apt-get install mysql-server
```

4. Во время установки вам будет предложено ввести пароль для пользователя "root" MySQL.
5. После завершения установки можно запустить MySQL:

```bash
sudo systemctl start mysql
```

6. Теперь MySQL работает на вашем Linux-сервере.

### Первая БД

Начать следует с создания новой базы данных. Новая БД в MySQL создаётся следующей командой:

```sql
CREATE DATABASE <имя базы данных>;
```
После создания базы данных её невозможно переименовать, поэтому давайте имена осознанно.

Прежде чем начать работать с нашей БД, необходимо сообщить об этом MySQL:

```sql
USE <имя базы>;
```

### Первая таблица

Давайте создадим нашу первую таблицу - “countries”, как в примере выше! Наша таблица будет состоять из первичного ключа id типа “целое число” и имени страны типа “символ”:

```sql
CREATE TABLE countries(
  id INT AUTO_INCREMENT PRIMARY KEY,
  name CHAR(128)
);
```

Чтобы добавить данные, необходимо использовать команду:

```sql
INSERT INTO  <название таблицы> SET <имя столбца1> = <значение1>, <имя столбца2> = <значение2> ...
```

Добавим пару стран в нашу таблицу:

```sql
INSERT INTO countries SET name = 'Georgia';
INSERT INTO countries SET name = 'Canada';
INSERT INTO countries SET name = 'Germany';
```

### Чтение данных

Теперь нам необходимо проверить, а правильно ли создалась наша таблица? Сохранились ли в ней данные?

Чтобы прочесть данные из таблицы, нам необходимо воспользоваться командой SELECT:

```sql
SELECT <перечисление столбцов> FROM <имя таблицы>
```

Давайте получим список всех доступных стран. Вместо перечисления всех столбцов можно использовать знак звездочки — *.

```sql
SELECT * FROM countries;
```

А что если нам нужно получить id конкретной страны? Для этого нам понадобится оператор WHERE:

```sql
SELECT <перечисление столбцов> 
FROM <имя таблицы> 
WHERE <условие>
```

Например, мы хотим узнать id Канады:

```sql
SELECT id 
FROM countries 
WHERE name = "Canada";
```

### Обновление данных

А что если нужно изменить тестовые данные в таблице? Воспользоваться командой UPDATE:

```sql
UPDATE <название таблицы> 
SET <имя столбца1> = <значение1>, <имя столбца2> = <значение2> ... 
WHERE <условие обновления>
```

Давайте изменим название одной из стран:

```sql
UPDATE countries 
SET name = "China" 
WHERE id = 2;
```

Важное уточнение! Если не указать условие обновления, то указанное значение будет у всех записей таблицы.

### Удаление таблицы

Если таблица больше не нужна, то ее можно удалить. В SQL есть специальная команда - DROP TABLE:

```sql
DROP TABLE <название таблицы>
```

**P.S.**

На этой ноте мы завершаем знакомство с SQL. Само собой, это не всё, и нужно ещё многое изучить, однако данный туториал даст вам толчок для дальнейшего изучения. Хорошим источником является документация, переведенная на русский язык - http://www.mysql.ru/docs/man/.

<hr>

[Содержание](#содержание)

